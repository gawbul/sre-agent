.PHONY: project-setup
project-setup: ## Install the virtual environment and install the pre-commit hooks
	@echo "ðŸš€ Creating virtual environment using uv"
	@uv sync
	@uv run pre-commit install

.PHONY: check
check: ## Run code quality tools.
	@echo "ðŸš€ Checking lock file consistency with 'pyproject.toml'"
	@uv lock --locked
	@echo "ðŸš€ Linting code: Running pre-commit"
	@uv run pre-commit run -a

.PHONY: tests
tests: ## Test the code with pytest
	@echo "ðŸš€ Testing code: Running pytest"
	@uv run python -m pytest --cov --cov-config=pyproject.toml --cov-report=xml

.PHONY: license-check
license-check: # Check that project dependencies all have licenses compatible with project LICENSE.txt (or lack thereof)
	@uv run licensecheck -l MIT

.PHONY: help
help: # Show help for each of the Makefile recipes.
	@grep -E '^[a-zA-Z0-9 -]+:.*#'  Makefile | sort | while read -r l; do printf "\033[1;32m$$(echo $$l | cut -f 1 -d':')\033[00m:$$(echo $$l | cut -f 2- -d'#')\n"; done
